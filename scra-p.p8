pico-8 cartridge // http://www.pico-8.com
version 39
__lua__

#include pancelor_debug.p8
#include managers.p8
#include ui.p8
#include parts.p8
#include funcs.p8
#include robos.p8

game_states = {title, combat}
game_state = nil

--definitions
part_index = { "frame", "head", "larm", "rarm", "legs"}

function _init()
    printh("\n\n Fresh Run")
    player = {}
    enemy = {}
    robo_make(player, part_depot.frame1, part_depot.head1, part_depot.arm1, part_depot.arm1, part_depot.leg1)
    robo_make(enemy, part_depot.frame1, part_depot.head1, part_depot.arm1, part_depot.arm1, part_depot.leg1)
    game_state = title
    player.parts.rarm.ani_y = 8
    player.parts.larm.ani_y = 8
end

function _update60()
    game_state.state_update();
end

function _draw()
    game_state.state_draw();
end

--title definitions--
title = {}

function title.state_update()
    if(btn(5)) then
        player.parts.larm.ani_x = -9
        player.parts.larm.ani_y = 6
    end
    if(btn(4)) then
        player.parts.larm.ani_x = 2
        player.parts.larm.ani_y = 7
    end
        --enemy.parts.rarm.ani_x = -6
    if(btn(3)) then
        player.parts.larm.ani_x = 0
        player.parts.larm.ani_y = 8
        --enemy.parts.rarm.ani_x = 0
    end
end

function title.state_draw()
    cls(2)
    ui_draw()
    robo_sprites(player)
    robo_sprites(enemy)
end

--combat definitions--
combat = {}

function combat.init() 
    player:robo_update_stats()
    enemy:robo_update_stats()
    cm:new(cm, player, enemy)
    game_state = combat
end

function combat.state_update()
    cm:update()
end

function combat.state_draw()
    cls()
end

__gfx__
00000000000000000000000000000000dddd000dddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000dd00000dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000555500055550000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000ddddddddddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000700000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000700000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077077000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000700000700000000000000000d000666000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000004400000004400000000d000606000d0000000000000000000000000000000000000000000000000000000000000000033300000000000000000
00000000000044000000044000000000d000666000d0000000000000000000000000000000000000000000000033330000000000000033330000000000000000
00000000003443333333443333333000dccc6c6cccd0000000000000000000000000000000000000000000000333333000000000000333330000000000000000
00000000334433333334433333355000dccc666cccd0000000000000000000000000663300000000000000003333333300000000003303330000000000000000
00000033344333333344333335555000dcccccccccd0000000000000000000000006333330000000000000003333333300000000033003300000000000000000
00000066666666666666666665555000dcccccccccd0000000000000000000000063333363000000000000003333333300000000330033000000000000000000
00000063333333333333333335555000dcccccccccd0000000000000000000000033333333000000000000000333333300000003300330000000000000000000
00000063333343334333336335555000dcccccccccd0000000000000000000000033333334000000000000000033333330000033003300000000000000000000
00000063333343334333333335555000dcccccccccd0000000000000000000000003333344440006660000000000330033000330033000000000000000000000
00000063333343334333333635555000dcccccccccd0000000000000000000000000333444444460006000000000033003303300330000000000000000000000
00000063333343334333333335555000dcccccccccd0000000000000000000000000004444444440006000000000003300303003300000000000000000000000
00000063333333333333333335555000ddddddddddd0000000000000000000000000000044444444006000000000000330777033000000000000000000000000
00000063333333333333333335500000000000000000000000000000000000000000000000044444660000000000000033777330000000000000000000000000
00000063333333333333333330000000000000000000000000000000000000000000000000000444000000000000000003777300000000000000000000000000
00000000000000333355000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000333355000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000044400000000000000000000cc00000000000000000000000000000000
000000000005555555555555000000000000000000000000000000000000000000000004440000000000000000000ccc00000000000000000000000000000000
000000000555555555555555000000000000000000000000000000000000000000000044440000000000000000000ccc00000000000000000000000000000000
00000005555555555555555500000000000000000000000000000000000000000000004445000000000000000000cccc00000000000000000000000000000000
0000000444444444444455550000000000000000000000000000000000000000000004444500000000000000000ccccc00000000000000000000000000000000
000000063333343333335555000000000000000000000000000000000000000000000444450000000000000000cccddc00000000000000000000000000000000
00000006336634336633555500000000000000000000000000000000000000000000044445000000000000000ccddddc00000000000000000000000000000000
0000000633333433336355550000000000000000000000000000000000000000000044445500000000000000cddddddc00000000000000000000000000000000
00000006333334333333555500000000000000000000000000000000000000000006666450000000000000ccddddddc000000000000000000000000000000000
000000063334444433335555000000000000000000000000000000000000000000666666500000000000ccdddddddc0000000000000000000000000000000000
00000006344333334433555500000000000000000000000000000000000000000066666660000000000cddddddddc00000000000000000000000000000000000
00000004433333333344555500000000000000000000000000000000000000000066666660000000000ccccccddc000000000000000000000000000000000000
00000003333333333333555500000000000000000000000000000000000000000066666660000000000cddddcdc0000000000000000000000000000000000000
00000003333333363333555500000000000000000000000000000000000000000006666650000000000cddddcc00000000000000000000000000000000000000
00000003333333336333555500000000000000000000000000000000000000000000555545000000000cddddc000000000000000000000000000000000000000
0000000333333333333355550000000000000000000000000000000000000000000044444450000000cddddddc00000000000000000000000000000000000000
0000000333333333333355550000000000000000000000000000000000000000000004444445000000cddddddc00000000000000000000000000000000000000
0000000333333333333355550000000000000000000000000000000000000000000000444444500000cddddddc00000000000000000000000000000000000000
0000000333333333333355550000000000000000000000000000000000000000000000044444450000cddddddc00000000000000000000000000000000000000
0000000633333333333355550000000000000000000000000000000000000000000000004433350000cddddddc00000000000000000000000000000000000000
0000000633333333333355000000000000000000000000000000000000000000000000003333350000cddddddc00000000000000000000000000000000000000
0000000663333333333300000000000000000000000000000000000000000000000000663333350000cddddddc00000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000066333333350000cdddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000063333333335000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000633333333300000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000633333330000000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000033333000000000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000cddddddddc0000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000cddddddc0000000000000000000000000dddd000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000cddddddc00000000000000000000000ddcccd000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccc0000000000000000000000ddcccccd000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddcccccccd000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddccccdd0000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd777dcdd000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d7777dd00000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d7777d000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd777d000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccdd00000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcdddd00000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddcccd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddccccd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddccccccd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dccccccccdd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dccccccccdd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccccccddd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddccccdddd000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddddd00000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddd0000000000000000000
