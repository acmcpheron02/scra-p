pico-8 cartridge // http://www.pico-8.com
version 39
__lua__

#include pancelor_debug.p8
-- #include player.p8
-- #include enemy.p8
#include managers.p8
#include ui.p8
#include parts.p8
#include funcs.p8
#include robos.p8

game_states = {title, combat}
game_state = nil

--definitions
part_index = { "frame", "head", "larm", "rarm", "legs"}

function _init()
    printh("\n\n Fresh Run")
    game_state = title
    player = robo_make(part_depot.frame1, part_depot.head1, part_depot.arm1, part_depot.arm1, part_depot.leg1)
    enemy = robo_make(part_depot.frame1, part_depot.head1, part_depot.arm1, part_depot.arm1, part_depot.leg1)
    --player:set_sprites()
    --part_make(2, part_depot.frame1)
end

function _update60()
    game_state.state_update();
end

function _draw()
    game_state.state_draw();
end

--title definitions--
title = {}

function title.state_update()
    if btnp(4) then combat.init() end
end

function title.state_draw()
    cls(1)
    --player:sprites()
    ui_draw()
    robo_sprites(player)
    robo_sprites(enemy)
end

--combat definitions--
combat = {}

function combat.init() 
    player:robo_update_stats()
    enemy:robo_update_stats()
    cm:new(cm, player, enemy)
    game_state = combat
end

function combat.state_update()
    cm:update()
    
end

function combat.state_draw()
    cls()
end

__gfx__
88000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000aa0000000aa00000000000000000000000000000000000000000000000000000000000000000000000000000000000033300000000000000000
000000000000aa0000000aa000000000000000000000000000000000000000000000000000000000000000000033330000000000000033330000000000000000
00000000009aa9999999aa9999999000000000000000000000000000000000000000000000000000000333000333333000000000000333330000000000000000
0000000099aa9999999aa99999944000000000000000000000000000000000000000333300000000000333003333333300000000003303330000000000000000
000000999aa9999999aa999994444000000000000000000000000000000000000003333330000000003330003333333300000000033003300000000000000000
00000044444444444444444444444000000000000000000000000000000000000003333333000000003330003333333300000000330033000000000000000000
00000099999999999999999994444000000000000000000000000000000000000003333333000000033300000333333300000003300330000000000000000000
000000999999a999a999999994444000000000000000000000000000000000000003333333000000033300000033333330000033003300000000000000000000
000000999999a999a999999994444000000000000000000000000000000000000003333333330000333000000000330033000330033000000000000000000000
000000999999a999a999999994444000000000000000000000000000000000000000333333333300333000000000033003303300330000000000000000000000
000000999999a999a999999994444000000000000000000000000000000000000000003333333333333000000000003300303003300000000000000000000000
00000099999999999999999994444000000000000000000000000000000000000000000033333333330000000000000330777033000000000000000000000000
00000099999999999999999994400000000000000000000000000000000000000000000000333333330000000000000033777330000000000000000000000000
00000099999999999999999990000000000000000000000000000000000000000000000000003333330000000000000003777300000000000000000000000000
00000000000000999944000000000000000000000000000000000000000000000000000000000033300000000000000000000000000000000000000000000000
00000000000000999944000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cc00000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000055500000000000000000000cc00000000000000000000000000000000
000000000008888888888888000000000000000000000000000000000000000000000005550000000000000000000ccc00000000000000000000000000000000
000000000888888888888822000000000000000000000000000000000000000000000055550000000000000000000ccc00000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000000005555000000000000000000cccc00000000000000000000000000000000
0000000222222222222222220000000000000000000000000000000000000000000005555500000000000000000ccccc00000000000000000000000000000000
000000088888888888882222000000000000000000000000000000000000000000000555550000000000000000cccddc00000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000000055555000000000000000ccddddc00000000000000000000000000000000
0000000888888888888822220000000000000000000000000000000000000000000055555500000000000000cddddddc00000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000005666550000000000000ccddddddc000000000000000000000000000000000
000000088888888888882222000000000000000000000000000000000000000000566666500000000000ccdddddddc0000000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000066666660000000000cddddddddc00000000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000066666660000000000ccccccddc000000000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000066666660000000000cddddcdc0000000000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000006666650000000000cddddcc00000000000000000000000000000000000000
00000008888888888888222200000000000000000000000000000000000000000000666555000000000cddddc000000000000000000000000000000000000000
0000000888888888888822220000000000000000000000000000000000000000000055555550000000cddddddc00000000000000000000000000000000000000
0000000888888888888822220000000000000000000000000000000000000000000005555555000000cddddddc00000000000000000000000000000000000000
0000000888888888888822220000000000000000000000000000000000000000000000555555500000cddddddc00000000000000000000000000000000000000
0000000888888888888822220000000000000000000000000000000000000000000000055555550000cddddddc00000000000000000000000000000000000000
0000000888888888888822220000000000000000000000000000000000000000000000000666660000cddddddc00000000000000000000000000000000000000
0000000888888888888822000000000000000000000000000000000000000000000000006666660000cddddddc00000000000000000000000000000000000000
0000000888888888888800000000000000000000000000000000000000000000000000666666660000cddddddc00000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000066666666660000cdddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000066666666666000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000666666666600000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000666666660000000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000066666000000000cddddddddc0000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000cddddddddc0000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000cddddddc0000000000000000000000000dddd000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000cddddddc00000000000000000000000ddcccd000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000cccccc0000000000000000000000ddcccccd000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddcccccccd000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddccccdd0000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd777dcdd000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d7777dd00000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d7777d000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd777d000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccd000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccdd00000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcdddd00000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddcccd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddccccd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddccccccd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dccccccccdd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dccccccccdd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcccccccddd00000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddccccdddd000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddddddd00000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ddd0000000000000000000
