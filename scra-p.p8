pico-8 cartridge // http://www.pico-8.com
version 39
__lua__

#include pancelor_debug.p8
#include managers.p8
#include ui.p8
--#include parts.p8
#include funcs.p8
#include robos.p8

game_states = {title, combat}
game_state = nil

--definitions
part_index = { "frame", "head", "larm", "rarm", "legs"}

function _init()
    printh("\n\n Fresh Run")
    dist_by_grade(3)
    game_state = combat
    player = {}
    enemy = {}
    robo_make(player, part_depot.frame1, part_depot.head1, part_depot.arm1, part_depot.arm2, part_depot.leg1)
    robo_make(enemy, part_depot.frame1, part_depot.head1, part_depot.arm1, part_depot.arm2, part_depot.leg1)
    combat.init()
    
    printh("hp: "..player.hp)
    printh("str: "..player.str)
    printh("def: "..player.def)
    printh("spd: "..player.spd)
    printh("chrg: "..player.chrg)
end

function _update60()
    game_state.state_update();
end

function _draw()
    game_state.state_draw();
end

--title definitions--
title = {}

function title.state_update()

end

function title.state_draw()

end

--combat definitions--
combat = {}

function combat.init() 
    robo_update_stats(player)
    robo_update_stats(enemy)
    cm.get_player_attacks()
    cm.get_player_costs()
    game_state = combat
end

function combat.state_update()
    cm.update()
end

function combat.state_draw()
    cls(2)
    ui_draw()
    robo_sprites(player)
    robo_sprites(enemy)
end

__gfx__
00000000000000000000000000000000dddd000dddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000dd00000dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000eeee000eeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000ddddddddddd0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000005500000005500000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000055000000055000000000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000004554444444554444444000d000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000445544444445544444466000d000000000d0000000000000000000000000774400000000000000000000000000000000000000000000000000000000
00000044455444444455444446666000d000000000d0000000000000000000000007444440000000000000000000000000000000000000000000000000000000
00000077777777777777777776666000d000000000d0000000000000000000000074444474000000000000000000000000000000000000000000000000000000
00000074444444444444444446666000d000000000d0000000000000000000000044444444000000000000000000000000000000000000000000000000000000
00000074444454445444447446666000d000000000d0000000000000000000000044444445000000000000000000000000000000000000000000000000000000
00000074444454445444444446666000d000000000d0000000000000000000000004444455550007770000000000000000000000000000000000000000000000
00000074444454445444444746666000d000000000d0000000000000000000000000444555555570007000000000000000000000000000000000000000000000
00000074444454445444444446666000d000000000d0000000000000000000000000005555555550007000000000000000000000000000000000000000000000
00000074444444444444444446666000ddddddddddd0000000000000000000000000000055555555007000000000000000000000000000000000000000000000
00000074444444444444444446600000000000000000000000000000000000000000000000055555770000000000000000000000000000000000000000000000
00000074444444444444444440000000000000000000000000000000000000000000000000000555000000000000000000000000000000000000000000000000
00000000000000444466000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000444466000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000555000000000000000000000000000000000000000000000000000000
00000000000666666666666600000000000000000000000000000000000000000000000555000000000000000000000000000000000000000000000000000000
00000000066666666666666600000000000000000000000000000000000000000000005555000000000000000000000000000000000000000000000000000000
00000006666666666666666600000000000000000000000000000000000000000000005556000000000000000000000000000000000000000000000000000000
00000005555555555555566600000000000000000000000000000000000000000000055556000000000000000000000000000000000000000000000000000000
00000007444445444444466600000000000000000000000000000000000000000000055556000000000000000000000000000000000000000000000000000000
00000007447745447744466600000000000000000000000000000000000000000000055556000000000000000000000000000000000000000000000000000000
00000007444445444474466600000000000000000000000000000000000000000000555566000000000000000000000000000000000000000000000000000000
00000007444445444444466600000000000000000000000000000000000000000007777560000000000000000000000000000000000000000000000000000000
00000000444555554444666600000000000000000000000000000000000000000077777760000000000000000000000000000000000000000000000000000000
00000000455444445544666600000000000000000000000000000000000000000077777770000000000000000000000000000000000000000000000000000000
00000005544444444455666600000000000000000000000000000000000000000077777770000000000000000000000000000000000000000000000000000000
00000004444444444444666600000000000000000000000000000000000000000077777770000000000000000000000000000000000000000000000000000000
00000004444444474444666600000000000000000000000000000000000000000007777760000000000000000000000000000000000000000000000000000000
00000004444444447444666600000000000000000000000000000000000000000000666656000000000000000000000000000000000000000000000000000000
00000004444444444444666600000000000000000000000000000000000000000000555555600000000000000000000000000000000000000000000000000000
00000004444444444444666600000000000000000000000000000000000000000000055555560000000000000000000000000000000000000000000000000000
00000004444444444444666600000000000000000000000000000000000000000000005555556000000000000000000000000000000000000000000000000000
00000004444444444444666600000000000000000000000000000000000000000000000555555600000000000000000000000000000000000000000000000000
00000007444444444444666600000000000000000000000000000000000000000000000055444600000000000000000000000000000000000000000000000000
00000007444444444444660000000000000000000000000000000000000000000000000044444600000000000000000000000000000000000000000000000000
00000007744444444444000000000000000000000000000000000000000000000000007744444600000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000774444444600000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000007444444444600000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000074444444440000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000074444444000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000004444400000000000000000000000000000000000000000000000000000000
