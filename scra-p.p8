pico-8 cartridge // http://www.pico-8.com
version 39
__lua__

#include pancelor_debug.p8
#include player.p8
#include enemy.p8
#include managers.p8
#include ui.p8
#include parts.p8
#include funcs.p8

game_states = {title, combat}
game_state = nil

--definitions
part_index = { "frame", "head", "larm", "rarm", "legs"}

function _init()
    printh("\n\n Fresh Run")
    game_state = title
    player:set_sprites()
end

function _update60()
    game_state.state_update();
end

function _draw()
    game_state.state_draw();
end

--title definitions--
title = {}

function title.state_update()
    if btnp(4) then combat.init() end
end

function title.state_draw()
    cls(1)
    player:sprites()
end

--combat definitions--
combat = {}

function combat.init() 
    player:robo_update_stats()
    enemy:robo_update_stats()
    cm:new(cm, player, enemy)
    game_state = combat
end

function combat.state_update()
    cm:update()
    
end

function combat.state_draw()
    cls()
end

__gfx__
88000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00088880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00aa00000000999944400000000aa000000000000000000000000000000000000000000000000000000033300000000000000000000033300000000000000000
00aaa000099944444444440000aaa000000000000000000000000000000000000000000000000000000333330033330000000000000033330000000000000000
000aa009944444444444444400aa0000000000000000000000000000000000000000333300000000003333330333333000000000000333330000000000000000
000aaa0944444444444444440aaa0000000000000000000000000000000000000003333330000000003333333333333300000000003303330000000000000000
0000aaa44444aa444aa44444aaa00000000000000000000000000000000000000033333333000000033333303333333300000000033003300000000000000000
00000aa44444aa444aa44444aa000000000000000000000000000000000000000033333333000000333330003333333300000000330033000000000000000000
00000094444444444444444440000000000000000000000000000000000000000033333333000000333300000333333300000003300330000000000000000000
000000944444444444444444400000000000000000000000000000000000000000333b3333330003333300000033333330000033003300000000000000000000
0000009444444a444a4444444000000000000000000000000000000000000000003333b333333333333300000000330033000330033000000000000000000000
0000009444444aaaaa44444440000000000000000000000000000000000000000003333b33333333333000000000033003303300330000000000000000000000
00000944444444aaa444444444000000000000000000000000000000000000000000033333333333333000000000003300303003300000000000000000000000
00000444444444444444444444000000000000000000000000000000000000000000000333333333b30000000000000330777033000000000000000000000000
0000000004444444444444000000000000000000000000000000000000000000000000000333b333b30000000000000033777330000000000000000000000000
000000000044444444444000000000000000000000000000000000000000000000000000000333bb330000000000000003777300000000000000000000000000
00000000004444444444400000000000000000000000000000000000000000000000000000000333300000000000000000000000000000000000000000000000
00000000000044444440000000000000000000000000000000000000000000000000000000000003300000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000ccd00000000000000cc00000000000000000000000000000000
00000222200000eee00000222200000000000000000000000000000000000000000000000000cccd00000000000000cc00000000000000000000000000000000
000022222222eeeeeee222222220000000000000000000000000000000000000000000000000ccdc0000000000000ccc00000000000000000000000000000000
0000222222eeeeeeeeeee222222000000000000000000000000000000000000000000000000cccdc0000000000000ccc00000000000000000000000000000000
0002222222eeeeeeeeeee222222200000000000000000000000000000000000000000000000cccdc000000000000cccc00000000000000000000000000000000
0022222e22eee22222eee22e22222000000000000000000000000000000000000000000000cccdcc00000000000ccccc00000000000000000000000000000000
00222222222ee22222ee22222222200000000000000000000000000000000000000000000ccccdcc0000000000cccddc00000000000000000000000000000000
00000022222ee22222ee2222200000000000000000000000000000000000000000000000dccccdcc000000000ccddddc00000000000000000000000000000000
00000002222ee22e22ee222200000000000000000000000000000000000000000000000ddcccdcc000000000cddddddc00000000000000000000000000000000
00000000222ee2eee2ee22200000000000000000000000000000000000000000000000dddcccdcc0000000ccddddddc000000000000000000000000000000000
00000000222eeee2eeee2220000000000000000000000000000000000000000000000ddddcccdcc00000ccdddddddc0000000000000000000000000000000000
00000000222ee2eee2ee222000000000000000000000000000000000000000000000dddddccdcc00000cddddddddc00000000000000000000000000000000000
00000000222ee22e22ee222000000000000000000000000000000000000000000000dddddccdcc00000ccccccddc000000000000000000000000000000000000
00000000222ee22222ee222000000000000000000000000000000000000000000000dddddccdc000000cddddcdc0000000000000000000000000000000000000
00000000222ee22222ee222000000000000000000000000000000000000000000000dddddcdcc000000cddddcc00000000000000000000000000000000000000
0000000222eee22222eee222000000000000000000000000000000000000000000000ddddcdc0000000cddddc000000000000000000000000000000000000000
000000022eeeee222eeeee22000000000000000000000000000000000000000000000dddddcc000000cddddddc00000000000000000000000000000000000000
000000222eeeeee2eeeeee22200000000000000000000000000000000000000000000dddddcc000000cddddddc00000000000000000000000000000000000000
00000022eeeeeeeeeeeeeee2200000000000000000000000000000000000000000000dddddcc000000cddddddc00000000000000000000000000000000000000
000000eeeeeeeeeeeeeeeeeee00000000000000000000000000000000000000000000ddddccc000000cddddddc00000000000000000000000000000000000000
000000eeeeeeeeeeeeeeeeeee00000000000000000000000000000000000000000000ddddccc000000cddddddc00000000000000000000000000000000000000
000000eeeeeeeeeeeeeeeeeee00000000000000000000000000000000000000000000ddddcc0000000cddddddc00000000000000000000000000000000000000
000000eeeeeeeeeeeeeeeeeee00000000000000000000000000000000000000000000ddddcc0000000cddddddc00000000000000000000000000000000000000
000000eeeeeeeeeeeeeeeeeee000000000000000000000000000000000000000000000dddcc0000000cdddddddc0000000000000000000000000000000000000
0000000ee2eeeeeeeeeee2ee0000000000000000000000000000000000000000000000dddcc000000cddddddddc0000000000000000000000000000000000000
0000000eeeeeeeeeeeeeeeee0000000000000000000000000000000000000000000000dcdcc000000cddddddddc0000000000000000000000000000000000000
00000000eeeeeeeeeeeeeee00000000000000000000000000000000000000000000000dcdccc00000cddddddddc0000000000000000000000000000000000000
0000000000eeeeeeeeeee000000000000000000000000000000000000000000000000cccdccc00000cddddddddc0000000000000000000000000000000000000
00000000000eeeeeeeee00000000000000000000000000000000000000000000dd00ccccdcccc0000cddddddddc0000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000dcccccccdcccc00000cddddddc00000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000dccccddddddddd0000cddddddc00000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000dddddddddddddd00000cccccc000000000000000000000000000000000000000
